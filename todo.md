# 用户
1. 注册账号
2. 实现发送邮件功能
    * 使用spring-boot-starter-mail依赖
    * redis存储验证码，TTL半小时
    * 密码已实现md5加密 **(暂时明文和md5同时记录)**
3. 登录
4. 退出登录
    * redis存储token和对应用户的基础信息(不包括密码)
5. 编辑用户基本信息
6. 修改密码
7. 上传头像
    * 七牛云实现
8. 通过id查询用户基本信息(头像链接、用户名等)

# 文章分类
1. 获取所有 分类id-分类名
    * 使用redis记录
2. 根据id 获得分类名
    * 使用redis记录
3. 新增分类 **(管理员功能，暂未实现)**


# 文章

联表涉及复杂sql

[mybatis-plus 自定义 sql | 杨小白の博客 (yangxiaobai.top)](https://yangxiaobai.top/2023/01/09/%E9%A1%B9%E7%9B%AE/mybatis-plus%E8%87%AA%E5%AE%9A%E4%B9%89sql/)

1. 获取最新文章-用于首页
2. 获取过去一个月热门文章-用于首页
3. 获取某个分类最新的文章 **todo**
4. 查询文章详细信息-增加浏览量
5. 发布文章
    * [实现敏感词检测](#jump)
6. 获取某用户所有文章-用于个人主页
7. 上传文章图片
    * 七牛云实现
8. 给文章点赞或取消
    * redis使用set存储

# 关注(mysql实现)
1. 关注或取关
2. 查询是否关注

# 一级评论
1. 新增评论
    * [实现敏感词检测](#jump)
2. 查询某文章下评论-根据点赞数排序
3. 查询某文章下评论-根据发布时间排序
4. 给评论点赞或取消
    * redis使用set存储

# 二级评论
1. 新增评论
    * [实现敏感词检测](#jump)
2. 查询一级评论下的二级评论-根据发布时间排序
    * 查询二级评论需查询回复用户，涉及到复杂sql
    [mysql 之 a 表两个 id 字段获取 b 表对应信息 | 杨小白の博客 (yangxiaobai.top)](https://yangxiaobai.top/2023/01/10/%E9%A1%B9%E7%9B%AE/MySQL%E4%B9%8Ba%E8%A1%A8%E7%9A%84%E4%B8%A4%E4%B8%AAId%E5%88%86%E5%88%AB%E8%8E%B7%E5%8F%96b%E8%A1%A8%E4%B8%AD%E5%AF%B9%E5%BA%94%E4%BF%A1%E6%81%AF/)
3. 给评论点赞或取消
    * redis使用set存储


# 统计日访问量，总访问量
1. redis日访问量
2. redis总访问量
3. 定时任务
    * 每晚23点新增第二题redis的key值
    * 每天2点
        1. 保存前一天redis的日访问量到数据库
        2. 更新数据库总访问量
        3. 删除前一天redis的key值


# 私信功能(mysql实现  )
1. 发送消息
    * [实现敏感词检测](#jump)
2. 撤回消息
    * 判断是否两分钟内
3. 查询某用户有多少未读信息-用于首页顶部展示
4. 查询用户a给当前用户发送的有多少未读消息-用于聊天列表展示
5. 查询用户的所有消息的第一条,并且按照时间排序
    * 复杂sql
    [MySQL 之 a 表连 b 表两次返回第一条数据 | 杨小白の博客 (yangxiaobai.top)](https://yangxiaobai.top/2023/01/13/%E9%A1%B9%E7%9B%AE/MySQL%E4%B9%8Ba%E8%A1%A8%E8%BF%9Eb%E8%A1%A8%E4%B8%A4%E6%AC%A1%E8%BF%94%E5%9B%9E%E7%AC%AC%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE/)

6. 查询用户a和用户b的所有消息,并且按照时间排序,并设置对方发送消息的已读

# 发布文章敏感词过滤

<span id="jump">文章敏感词</span> 

1. 敏感词初始化 [引用敏感词文件](https://raw.githubusercontent.com/importcjj/sensitive/master/dict/dict.txt)
2. 文章敏感词返回500禁止发布
3. 一级评论敏感词返回500禁止发布
4. 二级评论敏感词返回500禁止发布
5. 私信敏感词转为*直接发送

# 七牛云上传图片

1. 上传头像
2. 上传文章图片
3. 敏感图片过滤
4. get图片压缩

# 消息队列 实现消息推送（todo）

a发送文章，异步通知给他的粉丝

a发布评论，异步通知给回复的用户

a点赞，异步通知给点赞的用户

系统通知

# Spring aop记录日志（todo）
